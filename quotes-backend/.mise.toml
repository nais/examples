[tools]
java = "21"
gradle = "latest"

[env]
GRADLE_OPTS = "-Dorg.gradle.daemon=true -Dorg.gradle.parallel=true"
JAVA_TOOL_OPTIONS = "-XX:+UseG1GC"

[tasks.dev]
description = "Start development server with auto-reload"
run = "./gradlew run --continuous"

[tasks.build]
description = "Build the Kotlin application"
run = "./gradlew build"

[tasks.test]
description = "Run all tests"
run = "./gradlew test"

[tasks.run]
description = "Run the application"
run = "./gradlew run"

[tasks.watch]
description = "Run the application with hot reload (alias for dev)"
run = "./gradlew run --continuous"

[tasks.clean]
description = "Clean build artifacts"
run = "./gradlew clean"

[tasks.check]
description = "Run all checks (tests, linting, etc.)"
run = "./gradlew check"

[tasks.dependencies]
description = "Show dependency updates"
run = "./gradlew dependencyUpdates"

[tasks.lint]
description = "Run Kotlin linting (using check task)"
run = "./gradlew check"

[tasks.format]
description = "Format Kotlin code"
run = "./gradlew ktlintFormat"

[tasks.format-check]
description = "Check Kotlin code formatting"
run = "./gradlew ktlintCheck"

[tasks.docker-build]
description = "Build Docker image"
run = "docker build -t quotes-backend:local ."

[tasks.docker-run]
description = "Run Docker container locally"
run = "docker run -p 8080:8080 quotes-backend:local"

[tasks.ci]
description = "Run all CI checks"
run = ["./gradlew clean", "./gradlew check", "./gradlew build"]

[tasks."dependencies:check"]
description = "Check for outdated dependencies"
run = "./gradlew dependencyUpdates"

[tasks."dependencies:update"]
description = "Check for outdated dependencies (Gradle requires manual updates)"
run = "./gradlew dependencyUpdates"
