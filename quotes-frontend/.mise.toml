[tools]
nodejs = "24"
yarn = "1.22.22"

[env]
NODE_ENV = "development"
NEXT_TELEMETRY_DISABLED = "1"

[tasks.dev]
description = "Start development server with Turbopack"
run = "yarn dev"

[tasks.build]
description = "Build the Next.js application"
env = { NODE_ENV = "production", OTEL_EXPORTER_OTLP_ENDPOINT = "http://localhost:4317" }
run = "yarn build"

[tasks.start]
description = "Start production server"
run = "yarn start"

[tasks.watch]
description = "Run development server with hot reload (alias for dev)"
run = "yarn dev"

[tasks.lint]
description = "Run ESLint"
run = "yarn lint"

[tasks.lint-fix]
description = "Run ESLint with auto-fix"
run = "yarn lint --fix"

[tasks.type-check]
description = "Run TypeScript type checking"
run = "npx tsc --noEmit"

[tasks.install]
description = "Install dependencies"
run = "yarn install"

[tasks.clean]
description = "Clean build artifacts and node_modules"
run = ["rm -rf .next", "rm -rf node_modules/.cache"]

[tasks.docker-build]
description = "Build Docker image"
run = "docker build -t quotes-frontend:local ."

[tasks.docker-run]
description = "Run Docker container locally"
run = "docker run -p 3000:3000 quotes-frontend:local"

[tasks.ci]
description = "Run all CI checks"
env = { OTEL_EXPORTER_OTLP_ENDPOINT = "http://localhost:4317" }
run = [
  "mise run install",
  "mise run lint",
  "mise run type-check",
  "mise run build",
]
